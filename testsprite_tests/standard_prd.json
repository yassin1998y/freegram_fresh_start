{
  "meta": {
    "project": "Freegram Social Media Platform",
    "date": "2025-11-19",
    "prepared_by": "Software Development Manager"
  },
  "product_overview": "Freegram is a cross-platform social media platform built with Flutter and Firebase that blends traditional networking with innovative gifting mechanics, multimedia content sharing including short-form videos (Reels), ephemeral stories, and location-based user discovery to enhance user engagement and community building.",
  "core_goals": [
    "Provide a unique virtual gifting experience with a robust coin economy and gifting marketplace.",
    "Enable rich real-time chat with media sharing and seamless gift integration.",
    "Deliver a TikTok-style infinite scroll Reels feed with creation, editing, and sharing capabilities.",
    "Support ephemeral Stories for moment sharing with privacy controls and creative tools.",
    "Foster social networking with friend systems, customizable user profiles, and discovery features.",
    "Implement nearby discovery using location and Bluetooth technologies to connect users.",
    "Offer a marketplace and virtual store for trading and purchasing gifts and coin packages.",
    "Provide a unified content feed with algorithmic ranking and diverse post types.",
    "Ensure comprehensive notification systems for social and content interactions.",
    "Incorporate gamification elements like achievements, daily rewards, and referrals to boost engagement.",
    "Support business and creator Pages with analytics and customization.",
    "Maintain strong authentication, security, and privacy controls to protect users."
  ],
  "key_features": [
    "Virtual Gifting System with rarity tiers, animations, marketplace, trading, and showcase.",
    "Advanced real-time chat with multimedia support, message templates, and smart text links.",
    "Reels short-form video feed featuring infinite scroll, auto-play, editing tools, and analytics.",
    "Ephemeral Stories with photo/video/text capabilities, creative overlays, and privacy management.",
    "Robust friend system with request management, privacy, and caching for performance.",
    "Location-based Nearby Discovery with BLE, sonar radar visualization, waves, and match animations.",
    "Marketplace and Virtual Store for gift catalog, limited editions, coin packages, and transaction history.",
    "Algorithmic unified feed supporting text, photo, video posts with likes, comments, reactions, and boosts.",
    "Rich, actionable notifications covering social interactions, gifts, reels, and messages.",
    "Gamification through achievements, daily login bonuses, referral rewards, and leaderboards.",
    "Business and creator Pages equipped with follower insights, analytics dashboards, and verification.",
    "Comprehensive settings for account, app, moderation, and security management."
  ],
  "user_flow_summary": [
    "New User Journey: Splash screen → Authentication → Onboarding → Feature tutorials → Main screen access.",
    "Gift Sending Flow: Access chat/profile → Select gift → Compose message → Confirm/send → Recipient notification → Animated gift display.",
    "Reel Creation Flow: Open reel creation → Record or select video → Edit/trimming → Add overlays/music → Caption with tags → Post or draft save → Background upload.",
    "Nearby Discovery Flow: Enable location/Bluetooth → Open Nearby screen → Sonar radar shows users → Send wave → Match animation → Start chat."
  ],
  "validation_criteria": [
    "All user authentication methods function correctly with secure session handling.",
    "Reels feed loads smoothly with proper pagination, playback, likes, and shares.",
    "Gifting system transactions are accurate, gifts appear correctly in chats and profiles.",
    "Chat messages send and receive in real-time with media and gift integration.",
    "Stories post, display, and expire after 24 hours with appropriate privacy controls.",
    "Nearby discovery accurately detects and displays nearby users with permissions respected.",
    "Marketplace transactions process correctly with purchase, trading, and history tracking.",
    "Notification delivery is timely, grouped, and supports rich content and actions.",
    "Account and app settings persist user preferences reliably and securely.",
    "Performance optimizations ensure smooth scrolling, caching, and background uploads are effective.",
    "Moderation features allow reporting, blocking, and admin actions to work as expected."
  ],
  "code_summary": {
    "tech_stack": [
      "Dart",
      "Flutter",
      "Firebase Auth",
      "Cloud Firestore",
      "Firebase Cloud Functions",
      "BLoC",
      "video_player plugin"
    ],
    "features": [
      {
        "name": "Reels Feed Bloc",
        "description": "Manages paginated reel loading, playback state, likes/shares, and integrates with Firebase Auth using BLoC events/states.",
        "files": [
          "lib/blocs/reels_feed/reels_feed_bloc.dart",
          "lib/blocs/reels_feed/reels_feed_event.dart",
          "lib/blocs/reels_feed/reels_feed_state.dart"
        ]
      },
      {
        "name": "Reel Repository",
        "description": "Firestore data layer that fetches reels, handles likes/comments/shares, and computes trending reels with engagement scoring.",
        "files": [
          "lib/repositories/reel_repository.dart"
        ]
      },
      {
        "name": "Reels Feed Screen",
        "description": "Full-screen vertical PageView UI that wires the BLoC to ReelsPlayer widgets, restores scroll state, and triggers intelligent prefetching.",
        "files": [
          "lib/screens/reels_feed_screen.dart",
          "lib/widgets/reels/reels_player_widget.dart",
          "lib/widgets/reels/reels_feed_app_bar.dart"
        ]
      },
      {
        "name": "Media Prefetch Service",
        "description": "Handles reel/story video caching with adaptive bitrate selection, controller pooling, and memory pressure safeguards.",
        "files": [
          "lib/services/media_prefetch_service.dart",
          "lib/services/network_quality_service.dart",
          "lib/services/cache_manager_service.dart"
        ]
      },
      {
        "name": "Backend Cloud Functions",
        "description": "Node/TypeScript functions located under functions/ supporting feed ranking, notifications, and Firebase integrations.",
        "files": [
          "functions/*"
        ]
      }
    ]
  }
}
